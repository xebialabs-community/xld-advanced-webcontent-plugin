<?xml version='1.0' encoding='UTF-8'?>
<!--
THIS CODE AND INFORMATION ARE PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES OF MERCHANTABILITY AND/OR FITNESS
FOR A PARTICULAR PURPOSE. THIS CODE AND INFORMATION ARE NOT SUPPORTED BY XEBIALABS.
-->
<!--
    Note: If you modify this file, you must restart the XL Deploy server.
  -->
  <synthetic xsi:schemaLocation="http://www.xebialabs.com/deployit/synthetic synthetic.xsd" xmlns="http://www.xebialabs.com/deployit/synthetic" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

  <type type="wwwx.LargePublishedWebContent" extends="generic.ExecutedScriptWithDerivedArtifact" deployable-type="wwwx.LargeWebContent"  container-type="www.ApacheHttpdServer" description="A large set of web content on the webserver">
    <generate-deployable type="wwwx.LargeWebContent" extends="generic.Archive" description="Possibly large archive containing web content (HTML pages, images, etc)"/>

    <property name="virtualHost" kind="ci" required="false" referenced-type="www.ApacheVirtualHost" description="Virtual host which this web content maps to."/>

    <!-- admin properties -->
    <property name="targetDirectory" description="Target directory name" hidden="true" default="&lt;#assign target=(deployed.virtualHost.documentRoot)!''/&gt;&lt;#if target != ''&gt;${target}&lt;#else&gt;${deployed.container.defaultDocumentRoot}&lt;/#if&gt;"/>
    <property name="targetFile" required="false" hidden="true" />
    <property name="restartRequired" kind="boolean" required="false" default="false" hidden="true"/>

    <property name="createVerb" default="Deploy" hidden="true" />
    <property name="destroyVerb" default="Remove" hidden="true" />

    <property name="createScript" default="wwwx/create-large-published-web-content" hidden="true"/>
    <property name="modifyScript" default="wwwx/create-large-published-web-content" hidden="true"/>
    <property name="destroyScript" default="wwwx/destroy-large-published-web-content" hidden="true"/>
  </type>

  <type type="wwwx.VersionedPublishedWebContent" extends="wwwx.LargePublishedWebContent" deployable-type="wwwx.VersionedWebContent">
    <property name="targetDirectory" description="Target directory name" hidden="true" default="&lt;#assign target=(deployed.virtualHost.documentRoot)!''/&gt;&lt;#if target != ''&gt;${target}&lt;#else&gt;${deployed.container.defaultDocumentRoot}&lt;/#if&gt;/${deployed.deployedApplication.version.name}"/>
    <property name="currentSymlinkName" default="current" />
    <property name="nextSymlinkName" default="next" />
    <property name="postProcessCommand" default="" />

    <!-- admin properties -->
    <property name="createVerb" default="Deploy next" hidden="true" />
    <property name="destroyVerb" default="Remove previous" hidden="true" />
    <property name="destroyOrder" default="110" kind="integer" hidden="true" />
    <property name="createTargetDirectory" default="true" kind="boolean" hidden="true" />
  </type>

  <type type="wwwx.VersionedWebContent" extends="wwwx.LargeWebContent">
   <property name="currentSymlinkName" default="current" required="false" />
   <property name="nextSymlinkName" default="next" required="false" />
   <property name="postProcessCommand" default="" required="false" />
 </type>
</synthetic>
